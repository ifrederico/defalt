{{!-- Announcement Bar Section - Engine V2: Block Architecture --}}

<style>
.announcement-bar {
  background-color: var(--announcement-bar-background-color);
  color: var(--announcement-bar-text-color);
  border-bottom: var(--announcement-bar-divider-thickness) solid var(--announcement-bar-divider-color);
  text-align: center;
}

.announcement-bar__content {
  max-width: 1320px;
  margin: 0 auto;
  padding: 0 16px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: 0.5em;
}

.announcement-bar--narrow .announcement-bar__content {
  max-width: 960px;
}

.announcement-bar__item {
  display: inline;
}

.announcement-bar__link {
  color: inherit;
  text-decoration: {{#if underlineLinks}}underline{{else}}none{{/if}};
}

.announcement-bar__link:hover {
  opacity: 0.8;
}

.announcement-bar__separator {
  opacity: 0.5;
  margin: 0 0.25em;
}
</style>

<section
  class="announcement-bar{{#if (eq width 'narrow')}} announcement-bar--narrow{{/if}}"
  id="announcement"
  style="
    {{sectionStyle}};
    --announcement-bar-background-color: {{backgroundColor}};
    --announcement-bar-text-color: {{textColor}};
    --announcement-bar-divider-thickness: {{dividerThickness}}px;
    --announcement-bar-divider-color: {{dividerColor}};
  "
>
  <div class="announcement-bar__content">
    {{!-- Engine V2: Loop over announcements blocks with per-block typography --}}
    {{#if (length announcements)}}
      {{#each announcements}}
        {{#unless @first}}<span class="announcement-bar__separator">Â·</span>{{/unless}}
        {{#if link}}
          <a
            href="{{link}}"
            class="announcement-bar__link announcement-bar__item"
            style="font-size: {{#if (eq typographySize 'small')}}1.2rem{{else if (eq typographySize 'large')}}1.6rem{{else if (eq typographySize 'x-large')}}1.8rem{{else}}1.4rem{{/if}}; font-weight: {{#if (eq typographyWeight 'light')}}300{{else if (eq typographyWeight 'bold')}}700{{else}}500{{/if}}; letter-spacing: {{#if (eq typographySpacing 'tight')}}-0.02em{{else if (eq typographySpacing 'wide')}}0.05em{{else}}0{{/if}}; text-transform: {{#if (eq typographyCase 'uppercase')}}uppercase{{else}}none{{/if}};"
          >{{text}}</a>
        {{else}}
          <span
            class="announcement-bar__item"
            style="font-size: {{#if (eq typographySize 'small')}}1.2rem{{else if (eq typographySize 'large')}}1.6rem{{else if (eq typographySize 'x-large')}}1.8rem{{else}}1.4rem{{/if}}; font-weight: {{#if (eq typographyWeight 'light')}}300{{else if (eq typographyWeight 'bold')}}700{{else}}500{{/if}}; letter-spacing: {{#if (eq typographySpacing 'tight')}}-0.02em{{else if (eq typographySpacing 'wide')}}0.05em{{else}}0{{/if}}; text-transform: {{#if (eq typographyCase 'uppercase')}}uppercase{{else}}none{{/if}};"
          >{{text}}</span>
        {{/if}}
      {{/each}}
    {{!-- Legacy fallback: Support old previewText field for migration --}}
    {{else if previewText}}
      <span class="announcement-bar__item" style="font-size: 1.4rem;">{{previewText}}</span>
    {{!-- Empty state --}}
    {{else}}
      <span class="announcement-bar__item" style="font-size: 1.4rem;">Add announcements in the sidebar.</span>
    {{/if}}
  </div>
</section>
